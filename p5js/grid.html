<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.3.1/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.3.1/addons/p5.sound.min.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
    <meta charset="utf-8" />
    <meta meta name="viewport" content= "width=device-width, user-scalable=no" />

  </head>
  <style>
    html{}
    *{
      margin: 0;
      padding:0;
    }
    body{
      background-color: rgba(237, 237, 237, 1);
      overflow: hidden;
    }
    a img{
      width: 10%;
    }
    a:hover{
      opacity: 0.5;
    }

    #canvas-container{
      margin-top: 10px;
      width: 350px;
      height: 350px;
      border: 1px solid black;
    }
  
  </style>
  <body>

    <a onClick="window.location.reload();"><img src="../assets/random.png" alt=""></a>
    <div id="canvas-container"><div>
      <p style="display:none;" id="p5_loading"></p>
    
    <script>
      //variaveis grid
      let cols = 6;
      let rows = 6;
      let conta1=0;
      let conta2=0;

      let width = 350;
      let height = 350;


      //create grid
      let grid = new Array(rows).fill(0).map(() => new Array(cols).fill(0));

      let alfabeto = ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z"];

      let myFont;
      function preload() {
        myFont = loadFont('../assets/fonts/SpaceMono-Bold.ttf');
      }

      function setup() {
        let cnv = createCanvas(width, height);
        cnv.parent('canvas-container');

        let linha=1;
        for (let i = 0; i < cols; i++) {
          for (let j = 0; j < rows; j++) {
            let a =int(random(0, 2));
            let del = int(random(alfabeto.length));
            if ((a==0 && conta1<=9) || alfabeto.length==0) {
              grid[i][j] = new Cell(i*(width/6), j*(height/6), width/6, height/6, null);
              //prletln(linha);
              linha++;
              if (conta1<=9) {
                conta1++;
              }
            } else {
              grid[i][j] = new Cell(i*(width/6), j*(height/6), width/6, height/6, alfabeto[del]);
              //prletln(alfabeto[del]);
              linha++;
              alfabeto.splice(del, 1);
              //alfabeto.remove(del);
            }
          }
        }
      }

      function contains( arr,  val) {
        for (let i=0; i<arr.length; i++) {
          if (arr[i]==val) {
            return true;
          }
        }
        return false;
      }
      function draw() {
        background(255);
        for (let i = 0; i < cols; i++) {
          for (let j = 0; j < rows; j++) {

            noFill();
            grid[i][j].display();

            noStroke();
            textSize(32);
            textFont(myFont);
            fill(0, 0, 0);
            text(grid[i][j].getletra(), grid[i][j].getx() ,grid[i][j].gety());

          }
        }
      }


      class Cell {

        // Cell Constructor
        constructor( tempX,  tempY,  tempW,  tempH,  tempL) {
          this.x = tempX;
          this.y = tempY;
          this.w = tempW;
          this.h = tempH;
          this.l= tempL;
        } 

        getletra(){
          if(this.l==null){
            return "";
          }else{
                return this.l;
          }
        }
        
        getx(){
          let a=this.x+((this.w/2)-12);
          return a;
        }

          gety(){
          let a=this.y+((this.h/2)+12);
          return a;
        }

        display() {
          stroke(0);
          strokeWeight(2);
          fill(237,237,237);
          rect(this.x, this.y, this.w, this.h);
        }
      }
    </script>
  </body>
</html>